import{h as u,m as g,y as d}from"./hooks.module.1dffcd36.js";import{e as n}from"./jsxRuntime.module.24ec9489.js";import{d as v}from"./preact.module.477d7067.js";const{replace:w}="",b=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,O={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},k=t=>O[t],C=t=>w.call(t,b,k),A=({headings:t=[]})=>{const o=u(),l="on-this-page-heading",h=u([]),[f,a]=g("overview");d(()=>{const e=()=>{const s=document.querySelectorAll("article :is(h1, h2, h3, h4)");h.current=Array.from(s).map(r=>({id:r.id,topOffset:r.getBoundingClientRect().top+window.scrollY}))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),d(()=>{if(!o.current)return;const e=c=>{for(const i of c)if(i.isIntersecting){const{id:p}=i.target;if(p===l)continue;a(i.target.id);break}},s={rootMargin:"-100px 0% -66%",threshold:1},r=new IntersectionObserver(e,s);return document.querySelectorAll("article :is(h1,h2,h3)").forEach(c=>r.observe(c)),()=>r.disconnect()},[o.current]);const m=e=>{a(e.target.getAttribute("href").replace("#",""))};return n(v,{children:[n("h2",{id:l,className:"heading",children:"目录"}),n("ul",{ref:o,children:t.filter(({depth:e})=>e>1&&e<4).map(e=>n("li",{className:`header-link depth-${e.depth} ${f===e.slug?"current-header-link":""}`.trim(),children:n("a",{href:`#${e.slug}`,onClick:m,children:C(e.text)})}))})]})};export{A as default};
