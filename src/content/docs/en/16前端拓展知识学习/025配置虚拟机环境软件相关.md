### 科普一下 DevOps 是什么

[如下图内容](./DevOps.png)
DevOps 的维基百科定义是这样的：
DevOps 是一组过程、方法与系统的统称，用于促进开发、技术运营和质量保障（QA）部门之间的沟通、协作与整合。

（1）虚拟化和容器，其实为 DevOps 提供了很好的前提条件。开发环境和部署环境都可以更好地隔离了，减小了相互之间的影响。

（2）微服务架构下，不同的工程师可以对各自负责的模块进行处理，例如开发、测试、部署、迭代。

（3）虚拟化，其实就是一种敏捷的云计算服务。它从硬件上，将一个系统“划分”为多个系统，系统之间相互隔离，为微服务提供便利。

（4）容器就更彻底了，不是划分为不同的操作系统，而是在操作系统上划分为不同的“运行环境”（Container），占用资源更少，部署速度更快。

在 DevOps 的流程下，运维人员会在项目开发期间就介入到开发过程中，了解开发人员使用的系统架构和技术路线，从而制定适当的运维方案。而开发人员也会在运维的初期参与到系统部署中，并提供系统部署的优化建议。
从目标来看，DevOps 就是让开发人员和运维人员更好地沟通合作，通过自动化流程来使得软件整体过程更加快捷和可靠。

### 1.VMware16 版本的秘钥

ZF3R0-FHED2-M80TY-8QYGC-NPKYF

### 2.Vagrant 简介

#### vagrant 是一个操作虚拟机的工具

基于 Ruby，用于创建和部署虚拟化开发环境。通过命令和配置文件来管理虚拟机，很快就能完成一套开发环境的部署，并可以打包传播，统一了开发环境，也解决了重复配置环境的麻烦。

支持 VirtualBox, Hyper-V, and Docker, VMware

官网：Vagrant by HashiCorp (vagrantup.com)

#### vagrant 的优点：

（1）统一开发环境。一次配置打包，统一分发给团队成员，解决诸如“编码问题”，“缺少模块”，“配置文件不同”带来的问题；

（2）避免重复搭建环境。新员工加入，快速加入开发，减少时间成本的浪费；

（3）多个相互隔离开发环境。可以在不同的 box 里跑不同的语言，或者编译安装同一语言不同版本，卸载清除时也很快捷；

（4）Vagrant 支持单机模拟多台机器，且支持一个配置文件 Vagrantfile 就可以跑分布式系统；

（5）Vagrant 可以使用 puppet、chef 等管理工具进行自动化配置部署。（Chef 就是现在比较热门的自动化运维工具之一，其他的工具还有 Ansible, Puppet, SaltStack. 为什么选择 Chef，是因为 Chef 对 Window 的支持非常的好。）

#### (1)使用指导

安装软件后，vagrant

```
查看当前的版本
vagrant -v

- 配置环境变量：VAGRANT_HOME
修改环境变量（非必须）
注明：它们默认安装存储的位置在用户目录下的 .vagrant.d 目录下，对于 Windows 系统来说，就是 C:\Users\用户名.vagrant.d。
比如：C:\Users\yhning\.vagrant.d


- box中镜像存放的位置：box 中的镜像默认存放路径：
Window：C:\Users\当前用户名\.vagrant.d\boxes\

- 添加当前的镜像
vagrant box add
"D:\vagrant_box\CentOS-7-x86_64-Vagrant-2004_01.VirtualBox.box"
- 查看当前的镜像列表
 vagrant box list



```

#### （2）选择 box 镜像的原因：拓展名称是：virtualBox.box

第三方仓库：http://www.vagrantbox.es
推荐选择 minimal + guest additions + puppet|chef 的 box
理由：

- minimal，资源占用少；
- GuestAdditions，相当于一个模拟设备驱动层，使得运行于虚拟机中的操作系统知道自己运行在一套模拟及其环境中（知道自己被虚拟化），Virtualbox 共享目录需要；
- puppet|chef， 并非必选。它们对未来提升 VM 配置自动化有好处，本身不大。

```
一些仓库加速下载
Ubuntu 官方仓库：http://cloud-images.ubuntu.com/
Ubuntu 清华大学镜像仓库：https://mirror.tuna.tsinghua.edu.cn/ubuntu-cloud-images/

Centos 官方仓库：http://cloud.centos.org/centos/



```

#### （3）注意

1.首先下载 Vagrant 安装 2.再下载 VirtualBox 安装 （根据 Windows 版本不同会有坑在里面，详情请见最下面的报错解决）
（Win7 防止不入坑建议下载 vagrant1.9.6 VirtualBox-4.3.12）

作者：Super 三脚猫
链接：https://www.jianshu.com/p/74cd6839eb5f
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

### 2.拓展：

#### puppet

puppet 是一个 IT 基础设施自动化管理工具，它能够帮助系统管理员管理基础设施的整个生命周期： 供应(provisioning)、配置(configuration)、联动(orchestration)及报告(reporting)。
基于 puppet ，可实现自动化重复任务、快速部署关键性应用以及在本地或云端完成主动管理变更和快速扩展架构规模等。

###### （1）管理资源：

能管理多达 40 多种资源，例如：file、user、group、host、package、service、cron、exec、yum repo 等

#### chef：对于 windows 支持非常好。

Chef 就是现在比较热门的自动化运维工具之一，其他的工具还有 Ansible, Puppet, SaltStack. 为什么选择 Chef，是因为 Chef 对 Window 的支持非常的好。

```
Chef Server版本是chef-server-core_12.8.0
Chef client的版本chef-client-12.13.37
chef 管理台的版本是chef-manage_2.4.3
chef dev kit的最新版本是0.17.17

```

### 3.VMware 的相关安装记录

#### NAT 模式一般选择后，虚拟机无法联网。
一般NAT模式直接和当前的电脑共用了IP后，自己不用配置联网。


- 解决 VMware 中 windows 系统无法连接本机网络的问题

在本地电脑（不是虚拟机）上按下 Win+R 打开运行，输入 services.msc 按回车，将 VMware DHCP Service 和 VMware NAT Service 服务设置为自动启动，并开启服务。

#### 虚拟机 NAT 模式与桥接模式的区别
所谓NAT模式，就是虚拟系统会通过宿主机的网络来访问外网，而这里的宿主机相当于有两个网卡，一个是真实网卡，一个是虚拟网卡
桥接模式这个相当于在一个局域网内创立了一个单独的主机，他可以访问这个局域网内的所有的主机，但是需要手动来配置IP地址，子网掩码，并且他是和真实主机在同一个网段（nat是两个网段），这个模式里，虚拟机和宿主机可以互相ping通。

#### （1）黑苹果安装记录

苹果系统的账号：

henry 密码 nyh123
装黑苹果：除了通过命令行将 10.14.0 版本的日期修改，重新等了 2 小时，安装。要有耐心。

- [解决安装黑苹果出现提示应用程序副本已损坏，不能用来安装 macOS 的解决方法 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/261095114)
  使用命令行输入：date 102400002019.00

- 如何联网：设置第一个桥接模式，复制物理网络连接状态
  一般安装
- 如何将当前的屏幕同步放大。

bios.forceSetupOnce = “TRUE”在文件 vmx 的最开头。

- 每一次苹果系统重启时间重置：关闭时间同步
- vmware 提高操作的反应灵敏度

#### （2）Centos 相关安装的时候，如何有界面 GUI

这里的页面需要在开始的时候，选择好最小软件。

- 设置基本信息

1、点击安装源，进入之后直接选择 done，警告符号随即消失。
2、软件选择：`GNOME桌面`，一个友好的图形化界面。也可以选择选择 Server with Gui，然后点击 Done。两种方式
3、根据需要禁用 Kdump
4、自动分区，一般化为 4 个分区，如图所示

- 设置界面和命令行

### 选择命令行或是界面

如果是管理员，使用 sudo

可设置的 centOS 7 系统默认启动模式

---设置为图形化界面模式
systemctl set-default graphical.target
---设置为命令行模式
systemctl set-default multi-user.target
设置 centOS 7 默认为图形化界面启动
