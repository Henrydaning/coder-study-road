### ssh 命令行的学习：

#### 解压文件

#### 移动位置的位置

#### 重命名文件

#### 在线学习 ssh 命令网站：找出 10 个常用命令

### 3.SSH 命令行传输文件到远程服务器

Ubuntu 操作系统

SCP 命令
使用方式如下：

#### 0、提交相关的服务器写入文件权限

chmod 777 /usr/local/redis

#### 1、上传本地文件到远程服务器

scp /var/www/test.php root@192.168.0.101:/var/www/
把本机/var/www/目录下的 test.php 文件上传到 192.168.0.101 这台服务器上的/var/www/目录中

#### 2、从服务器上下载文件

scp root@192.168.0.101:/var/www/test.txt /var/www/local_dir（本地目录）
把 192.168.0.101 上的/var/www/test.txt 的文件下载到/var/www/local_dir（本地目录）

#### 3、从服务器下载整个目录

scp -r root@192.168.0.101:/var/www/test /var/www/

#### 4、上传目录到服务器

scp -r test root@192.168.0.101:/var/www/
把当前目录下的 test 目录上传到服务器的/var/www/ 目录

### 4.二、Linux 生成 ssh 证书

#### 0、ssh 免密登录：安装一个 openssh-server（安装 ssh 服务）

```
查看ssh服务是否启动
查看SSH服务是否安装或启动的方法：sudo ps -e |grep ssh
查看SSH的版本：ssh -V
SSH 服务器的安装：sudo apt-get install openssh-server
SSH 客户端的安装：sudo apt-get install openssh-client
启动SSH服务：sudo service ssh start或者sudo service ssh restart
关闭SSH服务：service ssh start或service sshd stop

注意到关闭SSH后，ssh-agent仍然存在。他是ssh代理程序，用于方便管理私钥。
ssh-agent主要使用在如下两个场景：
1.使用不同的密钥连接不同主机，每次连接都要指定私钥;
2.当私钥设置了密码，每次使用认证时都需要输入密码，非常麻烦。

SSH远程访问出现Permission denied(publickey,password)解决方法
在这里插入图片描述
 在确保ssh服务已开启、管理员密码正确、IP地址正确、网络通畅后，发现我的ubuntu里并没有创建user3用户，所以用户名、用户密码肯定不对，改成虚拟机管理员的用户名就行了；或者你也可以尝试在ubuntu里添加一个user3用户。

添加用户
1.sudo useradd 用户名 -m ，其中－m：自动建立用户的登入目录。
2.查看所有用户：ls /home/
3.为创建用户设置密码： sudo passwd 用户名
4.一定要记住密码，不然只能删除该用户了

删除用户
sudo userdel  用户名
点击阅读全文

sudo apt install openssh-server


接着



```

### 5、开启 ssh 和查看是 ssh 否开启

[root@VM_0_6_centos ~]# netstat -anp|grep :22
tcp 0 0 0.0.0.0:22 0.0.0.0:\*  
tcp 0 36 172.16.0.6:22 211.161.248.60:22447
[root@VM_0_6_centos ~]# service sshd start
Redirecting to /bin/systemctl start sshd.service

#### (1)查看是否有生成的证书

```
[root@VM_0_6_centos .ssh]# cd  /root/.ssh
[root@VM_0_6_centos .ssh]# ls
[root@VM_0_6_centos .ssh]#
```

#### (2)生成证书 ssh-keygen -t rsa

邮箱可以不是真实的。

```
[root@VM_0_6_centos .ssh]# ssh-keygen -t rsa -C "zhengja@dist.com"
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:ANbGYlsumXjZ3GzsgkCen80YNwl5Y1/U4zGgDcgaVIA zhengja@dist.com
The key's randomart image is:
+---[RSA 2048]----+
|   o=B....oo     |
|  E.*.@  +. =    |
| o + ^.B.... +   |
|  = X B.*   .    |
|   + X +S        |
|    = + .        |
|       .         |
|                 |
|                 |
+----[SHA256]-----+
[root@VM_0_6_centos .ssh]# ls
id_rsa  id_rsa.pub
[root@VM_0_6_centos .ssh]#

```

#### (3)证书使用

可以配置 gitlab、github、其它机器上等。

例如：配置 gitlab
获取公钥（id_rsa.pub）内容

[root@VM_0_6_centos .ssh]# vim id_rsa.pub

### 6.切换到 root 账号，修改 root 密码

```
sudo -i

输入passwd后，可以修改
一般root的秘密设置一致，避免总忘记
```

### linux 系统安装 ssh 服务

```
 如果你用的是redhat，fedora，centos等系列linux发行版，那么敲入以下命令：
 sudo yum install sshd 或 sudo yum install openssh-server（由osc网友 火耳提供）。

 如果你使用的是debian，ubuntu，linux mint等系列的linux发行版，那么敲入以下命令：
 sudo apt-get install sshd 或 sudo apt-get install openssh-server（由osc网友 火耳提供）



```

### 查看 ssh 服务端口正常，是否被防火墙拦截

sudo ufw status

sudo ufw disable

### 7.ssh 的教程学习汇总

[ssh 教程记录](https://wangdoc.com/ssh/basic)
